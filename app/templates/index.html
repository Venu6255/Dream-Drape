{% extends "base.html" %}

{% block title %}Dream & Drape - Elegant Fashion for Every Occasion{% endblock %}

{% block content %}
<!-- Hero Section -->
<section class="hero-section py-5">
    <div class="container">
        <div class="row align-items-center">
            <div class="col-lg-6">
                <div class="hero-content">
                    <h1 class="display-4 fw-bold mb-4">
                        Where Dreams Meet Fashion
                    </h1>
                    <p class="lead mb-4">
                        Discover elegant traditional and contemporary fashion that celebrates your unique style. 
                        From stunning anarkalis to graceful sarees, find your perfect outfit.
                    </p>
                    <div class="hero-buttons">
                        <a href="{{ url_for('main.products') }}" class="btn btn-primary btn-lg me-3">
                            Shop Now
                        </a>
                        <a href="{{ url_for('main.products', category='New Arrivals') }}" class="btn btn-outline-primary btn-lg">
                            New Arrivals
                        </a>
                    </div>
                </div>
            </div>
            <div class="col-lg-6">
                <div class="hero-image text-center">
                    <img src="{{ url_for('static', filename='images/logo1.png') }}" alt="Dream & Drape" class="site-logo">
                </div>
            </div>
        </div>
    </div>
</section>

<!-- Features Section -->
<section class="py-5 bg-light">
    <div class="container">
        <div class="row">
            <div class="col-lg-3 col-md-6 mb-4">
                <div class="text-center">
                    <i class="fas fa-shipping-fast fa-3x text-primary mb-3"></i>
                    <h5>Free Shipping</h5>
                    <p class="text-muted">Free shipping on orders above ₹999</p>
                </div>
            </div>
            <div class="col-lg-3 col-md-6 mb-4">
                <div class="text-center">
                    <i class="fas fa-undo fa-3x text-primary mb-3"></i>
                    <h5>Easy Returns</h5>
                    <p class="text-muted">30-day hassle-free returns</p>
                </div>
            </div>
            <div class="col-lg-3 col-md-6 mb-4">
                <div class="text-center">
                    <i class="fas fa-headset fa-3x text-primary mb-3"></i>
                    <h5>24/7 Support</h5>
                    <p class="text-muted">Round-the-clock customer support</p>
                </div>
            </div>
            <div class="col-lg-3 col-md-6 mb-4">
                <div class="text-center">
                    <i class="fas fa-shield-alt fa-3x text-primary mb-3"></i>
                    <h5>Secure Payment</h5>
                    <p class="text-muted">100% secure payment processing</p>
                </div>
            </div>
        </div>
    </div>
</section>

<!-- Categories Section -->
<section class="py-5">
    <div class="container">
        <div class="row">
            <div class="col-12 text-center mb-5">
                <h2 class="section-title display-title">Shop by Category</h2>
                <p class="lead">Explore our diverse collection of elegant fashion</p>
            </div>
        </div>
        
        <div class="row">
            {% for category in categories %}
                <div class="col-lg-3 col-md-6 mb-4">
                    <div class="card category-card">
                        {% if category.image_url %}
                            <img src="{{ url_for('static', filename='images/categories/' + category.image_url) }}" 
                                 class="card-img-top" alt="{{ category.name }}"
                                 onerror="this.src='{{ url_for('static', filename='images/placeholder.jpg') }}'">
                        {% else %}
                            <div class="card-img-top d-flex align-items-center justify-content-center bg-light" style="height: 200px;">
                                <i class="fas fa-tshirt fa-3x text-primary"></i>
                            </div>
                        {% endif %}
                        <div class="card-body text-center">
                            <h5 class="card-title">{{ category.name }}</h5>
                            <p class="card-text text-muted">{{ category.description }}</p>
                            <a href="{{ url_for('main.products', category=category.name) }}" class="btn btn-outline-primary">
                                Explore
                            </a>
                        </div>
                    </div>
                </div>
            {% endfor %}
        </div>
    </div>
</section>

<!-- Featured Products Section -->
{% if featured_products %}
<section class="py-5 bg-light">
    <div class="container">
        <div class="row">
            <div class="col-12 text-center mb-5">
                <h2 class="section-title display-title">Featured Products</h2>
                <p class="lead">Handpicked favorites from our collection</p>
            </div>
        </div>
        
        <div class="row">
            {% for product in featured_products %}
                <div class="col-lg-3 col-md-6 mb-4">
                    <div class="card product-card h-100">
                        {% if product.is_new_arrival %}
                            <span class="product-badge new">New</span>
                        {% elif product.is_on_sale %}
                            <span class="product-badge sale">{{ product.get_discount_percentage() }}% Off</span>
                        {% elif product.is_best_seller %}
                            <span class="product-badge">Bestseller</span>
                        {% endif %}
                        
                        {% if current_user.is_authenticated %}
                            <button class="wishlist-btn" onclick="toggleWishlist({{ product.id }})">
                                <i class="fas fa-heart"></i>
                            </button>
                        {% endif %}
                        
                        <img src="{{ url_for('static', filename='images/products/' + (product.image_url or 'placeholder.jpg')) }}" 
                             class="card-img-top" alt="{{ product.name }}"
                             onerror="this.src='{{ url_for('static', filename='images/placeholder.jpg') }}'">
                        
                        <div class="card-body d-flex flex-column">
                            <h5 class="card-title">{{ product.name }}</h5>
                            <p class="card-text text-muted flex-grow-1">{{ product.description[:80] }}...</p>
                            
                            <div class="price mb-3">
                                {% if product.original_price and product.original_price > product.price %}
                                    <span class="original-price">₹{{ "%.2f"|format(product.original_price) }}</span>
                                {% endif %}
                                <span class="current-price">₹{{ "%.2f"|format(product.price) }}</span>
                                {% if product.get_discount_percentage() > 0 %}
                                    <span class="discount-badge">{{ product.get_discount_percentage() }}% OFF</span>
                                {% endif %}
                            </div>
                            
                            <div class="d-flex justify-content-between align-items-center">
                                <a href="{{ url_for('main.product_detail', id=product.id) }}" class="btn btn-outline-primary">
                                    View Details
                                </a>
                                {% if current_user.is_authenticated %}
                                    <button class="btn btn-primary btn-sm" onclick="addToCart({{ product.id }}, 1)">
                                        <i class="fas fa-shopping-cart"></i>
                                    </button>
                                {% endif %}
                            </div>
                        </div>
                    </div>
                </div>
            {% endfor %}
        </div>
        
        <div class="text-center mt-4">
            <a href="{{ url_for('main.products') }}" class="btn btn-primary btn-lg">
                View All Products
            </a>
        </div>
    </div>
</section>
{% endif %}

<!-- New Arrivals Section -->
{% if new_arrivals %}
<section class="py-5">
    <div class="container">
        <div class="row">
            <div class="col-12 text-center mb-5">
                <h2 class="section-title display-title">New Arrivals</h2>
                <p class="lead">Latest additions to our collection</p>
            </div>
        </div>
        
        <div class="row">
            {% for product in new_arrivals %}
                <div class="col-lg-4 col-md-6 mb-4">
                    <div class="card product-card h-100">
                        <span class="product-badge new">New</span>
                        
                        <img src="{{ url_for('static', filename='images/products/' + (product.image_url or 'placeholder.jpg')) }}" 
                             class="card-img-top" alt="{{ product.name }}"
                             onerror="this.src='{{ url_for('static', filename='images/placeholder.jpg') }}'">
                        
                        <div class="card-body">
                            <h5 class="card-title">{{ product.name }}</h5>
                            <div class="price mb-3">
                                <span class="current-price">₹{{ "%.2f"|format(product.price) }}</span>
                            </div>
                            <a href="{{ url_for('main.product_detail', id=product.id) }}" class="btn btn-primary">
                                Shop Now
                            </a>
                        </div>
                    </div>
                </div>
            {% endfor %}
        </div>
    </div>
</section>
{% endif %}

<!-- Best Sellers Section -->
{% if best_sellers %}
<section class="py-5 bg-light">
    <div class="container">
        <div class="row">
            <div class="col-12 text-center mb-5">
                <h2 class="section-title display-title">Best Sellers</h2>
                <p class="lead">Customer favorites that you'll love</p>
            </div>
        </div>
        
        <div class="row">
            {% for product in best_sellers %}
                <div class="col-lg-4 col-md-6 mb-4">
                    <div class="card product-card h-100">
                        <span class="product-badge">Bestseller</span>
                        
                        <img src="{{ url_for('static', filename='images/products/' + (product.image_url or 'placeholder.jpg')) }}" 
                             class="card-img-top" alt="{{ product.name }}"
                             onerror="this.src='{{ url_for('static', filename='images/placeholder.jpg') }}'">
                        
                        <div class="card-body">
                            <h5 class="card-title">{{ product.name }}</h5>
                            <div class="price mb-3">
                                <span class="current-price">₹{{ "%.2f"|format(product.price) }}</span>
                            </div>
                            <a href="{{ url_for('main.product_detail', id=product.id) }}" class="btn btn-primary">
                                Shop Now
                            </a>
                        </div>
                    </div>
                </div>
            {% endfor %}
        </div>
    </div>
</section>
{% endif %}

<!-- Sale Section -->
{% if sale_products %}
<section class="py-5">
    <div class="container">
        <div class="row">
            <div class="col-12 text-center mb-5">
                <h2 class="section-title display-title text-danger">Special Sale</h2>
                <p class="lead">Limited time offers - Don't miss out!</p>
            </div>
        </div>
        
        <div class="row">
            {% for product in sale_products %}
                <div class="col-lg-4 col-md-6 mb-4">
                    <div class="card product-card h-100">
                        <span class="product-badge sale">{{ product.get_discount_percentage() }}% OFF</span>
                        
                        <img src="{{ url_for('static', filename='images/products/' + (product.image_url or 'placeholder.jpg')) }}" 
                             class="card-img-top" alt="{{ product.name }}"
                             onerror="this.src='{{ url_for('static', filename='images/placeholder.jpg') }}'">
                        
                        <div class="card-body">
                            <h5 class="card-title">{{ product.name }}</h5>
                            <div class="price mb-3">
                                {% if product.original_price %}
                                    <span class="original-price">₹{{ "%.2f"|format(product.original_price) }}</span>
                                {% endif %}
                                <span class="current-price">₹{{ "%.2f"|format(product.price) }}</span>
                            </div>
                            <a href="{{ url_for('main.product_detail', id=product.id) }}" class="btn btn-danger">
                                Buy Now
                            </a>
                        </div>
                    </div>
                </div>
            {% endfor %}
        </div>
    </div>
</section>
{% endif %}

<!-- Testimonials Section -->
<section class="py-5 bg-light">
    <div class="container">
        <div class="row">
            <div class="col-12 text-center mb-5">
                <h2 class="section-title display-title">What Our Customers Say</h2>
                <p class="lead">Hear from happy customers who love Dream & Drape</p>
            </div>
        </div>
        
        <div class="row">
            <div class="col-lg-4 col-md-6 mb-4">
                <div class="card text-center h-100">
                    <div class="card-body">
                        <div class="rating-stars mb-3">
                            <i class="fas fa-star"></i>
                            <i class="fas fa-star"></i>
                            <i class="fas fa-star"></i>
                            <i class="fas fa-star"></i>
                            <i class="fas fa-star"></i>
                        </div>
                        <p class="card-text">
                            "Beautiful collection and excellent quality! The anarkali I ordered was even more stunning in person. 
                            Will definitely shop again!"
                        </p>
                        <h6 class="card-title">- Priya Sharma</h6>
                        <small class="text-muted">Mumbai</small>
                    </div>
                </div>
            </div>
            
            <div class="col-lg-4 col-md-6 mb-4">
                <div class="card text-center h-100">
                    <div class="card-body">
                        <div class="rating-stars mb-3">
                            <i class="fas fa-star"></i>
                            <i class="fas fa-star"></i>
                            <i class="fas fa-star"></i>
                            <i class="fas fa-star"></i>
                            <i class="fas fa-star"></i>
                        </div>
                        <p class="card-text">
                            "Fast delivery and amazing customer service. The saree quality is outstanding. 
                            Dream & Drape has become my go-to store!"
                        </p>
                        <h6 class="card-title">- Anjali Gupta</h6>
                        <small class="text-muted">Delhi</small>
                    </div>
                </div>
            </div>
            
            <div class="col-lg-4 col-md-6 mb-4">
                <div class="card text-center h-100">
                    <div class="card-body">
                        <div class="rating-stars mb-3">
                            <i class="fas fa-star"></i>
                            <i class="fas fa-star"></i>
                            <i class="fas fa-star"></i>
                            <i class="fas fa-star"></i>
                            <i class="fas fa-star"></i>
                        </div>
                        <p class="card-text">
                            "Love the variety and the elegant designs. Perfect for both casual and special occasions. 
                            Highly recommended!"
                        </p>
                        <h6 class="card-title">- Kavitha Menon</h6>
                        <small class="text-muted">Bangalore</small>
                    </div>
                </div>
            </div>
        </div>
    </div>
</section>

<!-- Newsletter Section -->
<section class="py-5">
    <div class="container">
        <div class="row">
            <div class="col-lg-8 mx-auto text-center">
                <h2 class="section-title display-title">Stay Updated</h2>
                <p class="lead mb-4">Subscribe to our newsletter for the latest fashion trends and exclusive offers</p>
                
                <form method="POST" action="{{ url_for('main.newsletter_signup') }}" class="row g-3 justify-content-center">
                    {{ newsletter_form.hidden_tag() }}
                    <div class="col-md-6">
                        {{ newsletter_form.email(class="form-control form-control-lg", placeholder="Enter your email") }}
                    </div>
                    <div class="col-md-3">
                        {{ newsletter_form.submit(class="btn btn-primary btn-lg") }}
                    </div>
                </form>
                
                <small class="text-muted mt-2 d-block">
                    We respect your privacy. Unsubscribe at any time.
                </small>
            </div>
        </div>
    </div>
</section>
{% endblock %}

{% block extra_js %}
<script>
// Newsletter form submission
$('form').on('submit', function(e) {
    var email = $('#email').val();
    if (!email || !isValidEmail(email)) {
        e.preventDefault();
        showNotification('Please enter a valid email address', 'error');
    }
});
</script>
{% endblock %}